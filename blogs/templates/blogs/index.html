{% extends "blogs/base.html" %}
{% load static %}
{% block content %}
<div class="flex_container">
    <div class="blog_container">
        {% for blog in blogs_list %}
        <article id="{{ blog.id }}">
            <div style="display: flex; flex-direction: row;">
                <div class="votes_container">
                    {% if user.is_authenticated %}
                    <i class="fas fa-caret-up post_up_down vote_up" id="upvote_{{ blog.id }}" title="Upvote"></i>
                    <span id="votes_count">{{ blog.likes }}</span>
                    <i class="fas fa-caret-down post_up_down vote_down" id="downvote_{{ blog.id }}"
                        title="Downvote"></i>
                    {% else %}
                    <i class="fas fa-caret-up post_up_down vote_up" id="upvote_{{ blog.id }}" title="Upvote"
                        data-toggle="modal" data-target="#exampleModalCenter"></i>
                    <span id="votes_count">{{ blog.likes }}</span>
                    <i class="fas fa-caret-down post_up_down vote_down" id="downvote_{{ blog.id }}" title="Downvote"
                        data-toggle="modal" data-target="#exampleModalCenter"></i>
                    {% endif %}
                </div>
                <div class="post_header" style="flex: 2;">
                    <a class="blog_title_index" href="{% url 'view_post' blog.id %}">
                        <h2 style="font-size: 22px;">{{ blog.title }}</h2>
                    </a>
                    <a href="{% url 'view_profile' blog.author %}" style="text-decoration: none;"><small
                            style="margin-right: 5px; font-size: 12px; font-weight: bold;">{{ blog.author }}</small></a>
                    <br>
                    <small style="font-size: 12px;">{{ blog.publish_date|date:"F d, Y" }}</small>
                </div>
            </div>

            <hr>
            <div class="index_blog_description">
                <p>
                <pre>{{ blog.description }}</pre>
                </p>
            </div>
            <hr>
            <!-- Comments part -->
            {% if blog.number_of_comments %}
            <i class="fas fa-comment"></i><small class="ml-1 text-secondary comments">{{ blog.number_of_comments }}
                Comment{{ blog.number_of_comments|pluralize }}</small>
            {% else %}
            <i class="fas fa-comment"></i><small class="ml-1 text-secondary comments">No comments yet</small>
            {% endif %}
        </article>

        {% endfor %}
    </div>
    <!--Side container-->
    <div class="side_container list-group">
        
            <p>Popular Blogs</p>
            <ul>
                {% for blog in blogs_list_top5 %}
                <li>
                    <a href="{% url 'view_post' blog.pk %}">{{ blog.title }}</a>
                </li>
                {% endfor %}
            </ul>
        <hr>
        
            <p>Top Bloggers</p>
            <ol>
                {% for item in top_authors %}
                <li><a href="{% url 'view_profile' item %}">{{ item }}</a></li>
                {% endfor %}
            </ol>
        
    </div>
</div>
</body>

</html>
{% endblock content %}